---
title: Memory
summary: Heap Memory X Stack Memory
image: '/'
author: 'Khlf'
publishedAt: '2024-09-03'
---


## Heap Memory 

- **O que é:** É uma parte da memória onde os objetos são alocados dinamicamente em tempo de execução.
- **Acesso:** Mais lento em comparação à memória da stack, pois envolve a alocação e desalocação dinâmicas.
- **Tamanho:** Dinâmico, cresce conforme a necessidade do programa.
- **Gerenciamento:** O gerenciamento da memória na heap é feito pelo _Garbage Collector_, que libera a memória ocupada por objetos que não são mais referenciados. O _Garbage Collector_ é executado automaticamente, mas não de forma imediata, e sim quando o sistema decidir que é necessário.

## Stack Memory

- **O que é:** A stack é uma estrutura de dados usada para armazenar variáveis locais e chamadas de função. Cada vez que uma função é chamada, um bloco é empilhado na stack.
- **Acesso:** Mais rápido, pois o acesso à memória na stack é sequencial e muito eficiente.
- **Tamanho:** Estático, determinado no início da execução do programa.
- **Gerenciamento:** O gerenciamento da stack é feito automaticamente conforme o programa executa. Quando uma função termina, o bloco correspondente é desempilhado, liberando a memória ocupada. 
- A stack segue a ordem LIFO (Last In, First Out).

## Relação entre Stack e Heap

Se você precisar usar um objeto que está na heap dentro de uma função, o que realmente é usado na função é uma referência ao objeto, e não o objeto em si. Por exemplo, se o objeto ocupa 50KB na heap, a stack conterá apenas um ponteiro (referência) para esse objeto, não os 50KB inteiros. O _Garbage Collector_ é responsável por liberar a memória desses objetos na heap quando eles não são mais utilizados, mas ele faz isso de maneira não determinística, ou seja, em momentos que ele considerar apropriados.

## Weak References

- **O que é:** Uma _Weak Reference_ é um tipo de referência que permite ao _Garbage Collector_ coletar o objeto na heap mesmo que ainda exista uma referência a ele. Isso pode ser útil em situações onde você tem referências cíclicas, como em injeções de dependência, que poderiam causar vazamentos de memória (memory leaks).
- **Uso:** Em cenários onde você deseja que um objeto seja coletado pelo _Garbage Collector_ assim que ele não for mais utilizado, mesmo que uma referência fraca ainda exista. Esse mecanismo evita vazamentos de memória ao garantir que os ciclos de vida dos objetos não causem a retenção desnecessária de memória.